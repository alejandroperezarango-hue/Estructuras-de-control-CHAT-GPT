<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FEED AVA ‚Äî Simulaci√≥n Pedag√≥gica Cr√≠tica de Redes Sociales</title>
  <meta name="description" content="FEED AVA es un artefacto digital que hace visible el capitalismo de la vigilancia, la econom√≠a de la atenci√≥n y las econom√≠as de los afectos en interfaces digitales.">
  <style>
    :root {
      --bg: #f0f2f5;
      --card: #fff;
      --muted: #6b7280;
      --accent: #1877f2;
      --vigilancia: #ef4444;
      --atencion: #f59e0b;
      --afectos: #3b82f6;
      --shadow: 0 6px 22px rgba(2, 6, 23, 0.08);
      --radius: 10px;
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    }

    * { box-sizing: border-box; }

    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: #071124;
      -webkit-font-smoothing: antialiased;
    }

    .app { max-width: 1400px; margin: 18px auto; padding: 12px; }

    /* ========== LANDING PAGE ========== */
    .landing-page { display: none; }
    .landing-page.active { display: block; }

    .landing-hero { background: linear-gradient(135deg, #1f2937 0%, #111827 100%); color: white; padding: 60px 40px; border-radius: 16px; text-align: center; margin-bottom: 40px; box-shadow: var(--shadow); }
    .landing-hero h1 { font-size: 2.8rem; margin: 0 0 16px 0; font-weight: 800; }
    .landing-hero p { font-size: 1.1rem; margin: 0 0 24px 0; opacity: 0.9; max-width: 700px; margin-left: auto; margin-right: auto; }

    .cta-button { background: linear-gradient(135deg, var(--accent), #0ea5a4); color: white; border: none; padding: 14px 32px; font-size: 1rem; border-radius: 8px; cursor: pointer; font-weight: 600; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 12px rgba(24,119,242,0.3); }
    .cta-button:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(24,119,242,0.4); }

    .concepts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 24px; margin-bottom: 40px; }

    .concept-card { background: var(--card); padding: 28px; border-radius: 12px; box-shadow: var(--shadow); border-left: 6px solid; transition: transform 0.3s, box-shadow 0.3s; }
    .concept-card:hover { transform: translateY(-4px); box-shadow: 0 12px 32px rgba(2,6,23,0.12); }

    .concept-card.vigilancia { border-color: var(--vigilancia); }
    .concept-card.atencion { border-color: var(--atencion); }
    .concept-card.afectos { border-color: var(--afectos); }

    .concept-card h2 { margin: 0 0 12px 0; display:flex; align-items:center; gap:8px; }
    .concept-badge { display:inline-flex; align-items:center; justify-content:center; width:24px; height:24px; border-radius:50%; color:white; font-size:12px; font-weight:700; }

    .concept-card.vigilancia .concept-badge { background:var(--vigilancia); }
    .concept-card.atencion .concept-badge { background:var(--atencion); }
    .concept-card.afectos .concept-badge { background:var(--afectos); }

    .concept-card p { margin: 12px 0; font-size: 0.95rem; line-height: 1.6; color:#374151; }
    .concept-card .definition { background: rgba(2,6,23,0.02); padding:12px; border-radius:6px; font-size:0.85rem; font-style:italic; border-left:3px solid currentColor; margin:14px 0; }
    .concept-card .examples { font-size:0.9rem; margin-top:12px; }
    .concept-card .examples strong { display:block; margin-top:8px; margin-bottom:6px; color:#1f2937; }
    .concept-card .examples ul { list-style:none; margin:0; padding:0; }
    .concept-card .examples li { padding:3px 0; font-size:0.85rem; color:#4b5563; }
    .concept-card .examples li:before { content:"‚ñ∏ "; font-weight:bold; }

    .author-section { background: rgba(2,6,23,0.03); padding:20px; border-radius:8px; margin-top:30px; text-align:center; font-size:0.9rem; color:#6b7280; }
    .author-section strong { color:#1f2937; }

    /* ========== SOCIAL FEED ========== */
    .social-interface { display:none; }
    .social-interface.active { display:block; }

    .topbar { display:flex; align-items:center; gap:12px; background:var(--card); padding:10px 12px; border-radius:10px; box-shadow:var(--shadow); margin-bottom:14px; }
    .brand { display:flex; gap:12px; align-items:center; }
    .logo { width:42px; height:42px; border-radius:8px; background:linear-gradient(135deg,var(--accent),#1d9bf0); display:flex; align-items:center; justify-content:center; color:white; font-weight:700; }

    .searchbar { flex:1; display:flex; align-items:center; gap:8px; padding:6px 10px; background:#f0f2f5; border-radius:999px; }
    .searchbar input { border:0; background:transparent; outline:none; width:100%; font-size:0.95rem; }

    .nav-actions { display:flex; gap:8px; align-items:center; }
    .icon-btn { background:transparent; border:0; padding:8px 10px; border-radius:8px; cursor:pointer; color:var(--muted); font-weight:600; transition:all 0.2s; }
    .icon-btn:hover { background:#e8f0ff; color:var(--accent); }
    .icon-btn.active { background:#e8f0ff; color:var(--accent); }

    .layout { display:grid; grid-template-columns: 260px 1fr 320px; gap:14px; }

    .card { background:var(--card); border-radius:12px; padding:12px; box-shadow:var(--shadow); border:1px solid rgba(2,6,23,0.03); }

    .profile-mini { display:flex; gap:10px; align-items:center; }
    .avatar-sm { width:44px; height:44px; border-radius:10px; background:linear-gradient(180deg,#eee,#ddd); }
    .menu-list { display:flex; flex-direction:column; gap:6px; margin-top:10px; }
    .menu-item { padding:8px; border-radius:8px; cursor:pointer; color:var(--muted); transition:all 0.2s; }
    .menu-item:hover { background:#f3f4f6; color:#111827; }

    .feed-top { display:flex; gap:12px; flex-direction:column; }
    .stories { display:flex; gap:10px; padding:8px 2px; overflow:auto; }
    .story { width:110px; height:160px; border-radius:10px; background:linear-gradient(180deg,#fff,#f7f9fb); display:flex; flex-direction:column; justify-content:flex-end; padding:8px; box-shadow:0 8px 20px rgba(2,6,23,0.04); cursor:pointer; transition:transform 0.2s; position:relative; overflow:hidden; }
    .story:hover { transform:scale(1.02); }

    .story svg, .post-image svg, .post-video svg { pointer-events: none; user-select: none; }

    .composer { display:flex; gap:10px; align-items:center; padding:10px; border-radius:12px; background:#fff; border:1px solid rgba(2,6,23,0.03); }
    .composer input { flex:1; border:0; outline:none; background:transparent; }

    .post { margin-top:12px; border-radius:12px; overflow:hidden; background:var(--card); border:1px solid rgba(2,6,23,0.03); box-shadow:var(--shadow); }
    .post-header { display:flex; gap:12px; padding:12px; align-items:center; }
    .post-body { padding:0 12px 12px 12px; color:#111827; }
    .post-image, .post-video { height:320px; border-radius:8px; margin:8px 0; display:flex; align-items:center; justify-content:center; color:var(--muted); position:relative; overflow:hidden; }

    .promo-badge { position:absolute; left:12px; top:12px; background:#fff2f2; color:var(--vigilancia); padding:6px 8px; border-radius:999px; font-weight:700; border:1px solid rgba(239,68,68,0.06); font-size:0.75rem; z-index:5; }

    .counts { padding:6px 12px; color:var(--muted); font-size:0.9rem; }
    .post-actions { display:flex; gap:8px; padding:10px 12px; border-top:1px solid rgba(2,6,23,0.03); background:#fff; }

    .action-btn { flex:1; padding:8px; border-radius:8px; border:1px solid rgba(2,6,23,0.03); background:#f8fafc; cursor:pointer; display:flex; gap:8px; align-items:center; justify-content:center; font-size:0.9rem; transition:all 0.2s; }
    .action-btn:hover { background:#e8f0ff; border-color:rgba(24,119,242,0.2); }

    .comment-box { display:flex; gap:8px; padding:10px 12px; border-top:1px solid rgba(2,6,23,0.03); background:#fff; }
    .comment-box input { flex:1; border:0; outline:none; background:transparent; font-size:0.9rem; }

    .small { font-size:0.86rem; color:var(--muted); }

    /* TOOLTIP */
    .tooltip {
      position: fixed;
      z-index: 99999;
      display: none;
      max-width: 420px;
      background: rgba(2,6,23,0.96);
      color: white;
      padding: 14px 16px;
      border-radius: 8px;
      font-size: 0.9rem;
      line-height: 1.5;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.16s ease;
    }
    .tooltip.show { display:block; opacity: 1; }
    .tooltip strong { display:block; margin-bottom:6px; font-size:0.95rem; }
    .tooltip-concept-tag { display:inline-block; padding:2px 6px; border-radius:3px; font-size:0.75rem; font-weight:700; margin-top:8px; }

    /* Docente mode */
    .docente-mode [data-concept] { position: relative; }
    .doc-badge { position:absolute; right:8px; top:8px; padding:4px 6px; border-radius:999px; color:white; font-weight:700; font-size:0.7rem; display:none; z-index:6; }
    .docente-mode .doc-badge { display:block; }
    .doc-vigilancia { background:var(--vigilancia); }
    .doc-atencion { background:var(--atencion); }
    .doc-afectos { background:var(--afectos); }
    .docente-mode [data-concept="vigilancia"] { outline: 3px solid rgba(239,68,68,0.15); outline-offset: 2px; }
    .docente-mode [data-concept="atencion"] { outline: 3px solid rgba(245,158,11,0.15); outline-offset: 2px; }
    .docente-mode [data-concept="afectos"] { outline: 3px solid rgba(59,130,246,0.15); outline-offset: 2px; }

    /* Map panel */
    .map-panel { max-height:600px; overflow-y:auto; }
    .map-item { display:flex; gap:8px; padding:10px; border-bottom:1px solid rgba(2,6,23,0.03); align-items:flex-start; cursor:pointer; transition: background 0.12s, transform 0.12s; border-radius:6px; }
    .map-item:hover { background: rgba(24,119,242,0.04); transform: translateY(-2px); }
    .map-bullet { width:12px; height:12px; border-radius:999px; margin-top:3px; flex-shrink:0; }
    .map-vigilancia { background:var(--vigilancia); }
    .map-atencion { background:var(--atencion); }
    .map-afectos { background:var(--afectos); }
    .map-item-text { flex:1; min-width:0; }
    .map-item-text strong { display:block; font-size:0.9rem; margin-bottom:3px; }
    .map-item-text .why { font-size:0.8rem; color:#6b7280; white-space:normal; }

    @media (max-width:1000px) { .layout { grid-template-columns:1fr; } }
    @media (max-width:640px) {
      .landing-hero { padding:40px 20px; }
      .landing-hero h1 { font-size:1.8rem; }
      .concepts-grid { grid-template-columns:1fr; }
    }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="FEED AVA - Simulador Pedag√≥gico">
    
    <!-- ===== LANDING PAGE ===== -->
    <div class="landing-page active" id="landing-page">
      <div class="landing-hero">
        <h1>FEED AVA</h1>
        <p>Una simulaci√≥n pedag√≥gica que hace visible lo invisible: las estructuras te√≥ricas que operan detr√°s de cada elemento de una red social.</p>
      </div>

      <div class="concepts-grid">
        <div class="concept-card vigilancia">
          <h2><span class="concept-badge">üëÅ</span> Capitalismo de la Vigilancia</h2>
          <p><strong>Shoshana Zuboff (2019)</strong></p>
          <div class="definition">"Un nuevo orden econ√≥mico que reclama experiencia humana como materia prima gratuita para traducirla en datos de comportamiento."</div>
          <p>En la simulaci√≥n, ver√°s:</p>
          <div class="examples">
            <strong>Mecanismos:</strong>
            <ul>
              <li>Barra de b√∫squeda (cada consulta es un dato)</li>
              <li>Metadata temporal y ubicaci√≥n</li>
              <li>Historias sugeridas (perfilado)</li>
              <li>Anuncios promocionados</li>
              <li>Guardados (retargeting)</li>
            </ul>
          </div>
        </div>

        <div class="concept-card atencion">
          <h2><span class="concept-badge">‚ö°</span> Econom√≠a de la Atenci√≥n</h2>
          <p><strong>Herbert Simon (1971)</strong></p>
          <div class="definition">"La atenci√≥n humana se vuelve el recurso escaso. Las plataformas dise√±an para captar, sostener y monetizar tu atenci√≥n."</div>
          <p>En la simulaci√≥n, ver√°s:</p>
          <div class="examples">
            <strong>T√©cnicas:</strong>
            <ul>
              <li>Autoplay de videos</li>
              <li>Scroll infinito</li>
              <li>Notificaciones con badges</li>
              <li>Contadores de vistas</li>
              <li>Trending topics</li>
            </ul>
          </div>
        </div>

        <div class="concept-card afectos">
          <h2><span class="concept-badge">üíó</span> Econom√≠as de los Afectos</h2>
          <p><strong>Susanna Paasonen + Sara Ahmed</strong></p>
          <div class="definition">"Tus emociones se convierten en trabajo no remunerado. Reacciones, comentarios y compartidos generan valor para la plataforma."</div>
          <p>En la simulaci√≥n, ver√°s:</p>
          <div class="examples">
            <strong>Mecanismos:</strong>
            <ul>
              <li>Botones de reacci√≥n</li>
              <li>Conteo visible de likes</li>
              <li>Comentarios y engagement</li>
              <li>Emojis de reacci√≥n</li>
              <li>Validaci√≥n social</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="author-section">
        <strong>¬øC√≥mo usar FEED AVA?</strong><br>
        Haz clic en "Explorar simulaci√≥n" para entrar a una interfaz tipo red social. Usa el modo docente para ver etiquetas en cada elemento.
      </div>

      <div style="text-align:center; margin-top:30px;">
        <button class="cta-button" id="start-simulation">Explorar simulaci√≥n ‚Üí</button>
      </div>
    </div>

    <!-- ===== SOCIAL FEED INTERFACE ===== -->
    <div class="social-interface" id="social-interface">
      <div style="margin-bottom:12px; display:flex; justify-content:space-between; align-items:center;">
        <h2 style="margin:0;">Simulaci√≥n Interactiva</h2>
        <button class="icon-btn" id="back-to-landing" title="Volver a inicio">‚Üê Volver</button>
      </div>

      <div class="topbar" role="banner">
        <div class="brand">
          <div class="logo">F</div>
          <div>
            <div style="font-weight:700;">FEED AVA</div>
            <div class="small" style="margin-top:2px;">Simulador cr√≠tico</div>
          </div>
        </div>

        <div class="searchbar" role="search" data-concept="vigilancia" data-what="top-search">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#6b7280" stroke-width="2" stroke-linecap="round"/></svg>
          <input id="top-search" placeholder="Buscar personas, publicaciones o temas" aria-label="Buscar" />
          <button id="top-search-btn" class="icon-btn" data-concept="vigilancia">Ir</button>
        </div>

        <div class="nav-actions" role="navigation">
          <button class="icon-btn active" data-action="home">Inicio</button>
          <button class="icon-btn" id="notif-btn" data-concept="atencion" data-what="notif-badge">üîî <span id="notif-badge" class="small" style="display:inline-block; margin-left:6px;">3</span></button>
        </div>
      </div>

      <div class="layout" role="main">
        <!-- LEFT SIDEBAR -->
        <div class="sidebar-left">
          <div class="card">
            <div class="profile-mini">
              <div class="avatar-sm"></div>
              <div>
                <div style="font-weight:700;">Usuario Pedag√≥gico</div>
                <div class="small">Ver perfil</div>
              </div>
            </div>
            <div class="menu-list">
              <div class="menu-item" data-concept="vigilancia" data-what="guardados">üìå Guardados</div>
              <div class="menu-item" data-concept="vigilancia" data-what="configuracion">‚öôÔ∏è Configuraci√≥n</div>
              <div class="menu-item" data-concept="atencion" data-what="trending">üì∫ Tendencias</div>
              <div class="menu-item" data-concept="vigilancia" data-what="amigos">üë• Amigos</div>
            </div>
          </div>

          <div style="height:12px;"></div>

          <div class="card">
            <strong>üìä Panel Docente</strong>
            <p class="small">Activa modo docente para ver etiquetas en cada elemento.</p>
            <div style="margin-top:8px; display:flex; gap:6px; flex-wrap:wrap;">
              <button id="toggle-doc" class="action-btn" style="flex:1; min-width:140px;">Modo Docente</button>
              <button id="go-landing" class="action-btn" style="flex:1; min-width:140px;">‚Üê Landing</button>
            </div>
          </div>
        </div>

        <!-- CENTER FEED -->
        <div class="main">
          <div class="card feed-top">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
              <strong>Feed Pedag√≥gico</strong>
              <div class="small">Cada elemento muestra qu√© estructura opera</div>
            </div>

            <div class="stories" role="list" data-concept="atencion">
              <div class="story" data-concept="atencion" data-what="story-autoplay" style="background:linear-gradient(135deg,#3b82f6 0%,#06b6d4 100%); border:2px solid #0ea5a4;">
                <svg width="100%" height="100%" viewBox="0 0 110 160" preserveAspectRatio="xMidYMid slice" style="position:absolute; top:0; left:0;">
                  ircle cx="25" cy="30" r="15" fill="#fbbf24" opacity="0.9"/>
                  <polygon points="55,60 70,90 40,90" fill="#fbbf24" opacity="0.8"/>
                </svg>
                <div style="font-weight:700; font-size:0.9rem;">Tu historia</div>
                <div class="small">Autoplay</div>
              </div>

              <div class="story" data-concept="vigilancia" data-what="story-suggested" style="background:linear-gradient(135deg,#ef4444 0%,#f97316 100%); border:2px solid #dc2626;">
                <svg width="100%" height="100%" viewBox="0 0 110 160" preserveAspectRatio="xMidYMid slice" style="position:absolute; top:0; left:0;">
                  ircle cx="30" cy="45" r="18" fill="#fff" opacity="0.6"/>
                  <rect x="50" y="30" width="45" height="50" fill="#1f2937" rx="4" opacity="0.8"/>
                </svg>
                <div style="font-weight:700; font-size:0.9rem;">Sugerida</div>
                <div class="small">Basada en perfil</div>
              </div>

              <div class="story" data-concept="atencion" style="background:linear-gradient(135deg,#f59e0b 0%,#fbbf24 100%); border:2px solid #f59e0b;">
                <svg width="100%" height="100%" viewBox="0 0 110 160" preserveAspectRatio="xMidYMid slice" style="position:absolute; top:0; left:0;">
                  <polygon points="55,20 65,50 40,50" fill="#dc2626"/>
                </svg>
                <div style="font-weight:700; font-size:0.9rem;">Trending</div>
                <div class="small">Viral ahora</div>
              </div>
            </div>

            <div class="composer" data-concept="afectos" data-what="composer">
              <div class="avatar-sm"></div>
              <input id="composer-input" placeholder="¬øQu√© est√°s pensando?" aria-label="Componer publicaci√≥n" />
              <button id="composer-post" class="action-btn" data-concept="afectos" data-what="composer-post">Publicar</button>
            </div>
          </div>

          <!-- POST 1 -->
          <article class="post" data-id="p1" role="article">
            <div class="post-header">
              <div class="avatar-sm"></div>
              <div style="flex:1;">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                  <strong>Mar√≠a Garc√≠a</strong>
                  <div class="small"><span data-concept="vigilancia" data-what="timestamp">Hace 2h</span></div>
                </div>
                <div class="small" style="margin-top:2px;">M√∫sica & Lifestyle</div>
              </div>
            </div>

            <div class="post-body">
              <div>Mi √∫ltima noche en el concierto. ¬°Momento inolvidable! üéµ</div>

              <div class="post-image" data-concept="atencion" style="background:linear-gradient(180deg,#e6eefc,#f4f9ff);">
                <div style="text-align:center;">
                  <div style="font-size:4rem; margin-bottom:10px;">üé§</div>
                  <div class="small">Foto del concierto</div>
                </div>
                <div class="promo-badge" data-concept="vigilancia" data-what="promo-badge">Promocionado</div>
              </div>

              <div class="counts" style="display:flex; gap:12px; padding:8px 12px; border-top:1px solid rgba(2,6,23,0.03); border-bottom:1px solid rgba(2,6,23,0.03); margin:8px 0;">
                <span class="reaction-count" data-concept="afectos" data-what="reaction-counter" style="flex:1; cursor:help; padding:4px; border-radius:4px;">‚ù§ <strong>24</strong> reacciones</span>
                <span class="small" data-concept="atencion" data-what="view-counter" style="flex:1; cursor:help; padding:4px; border-radius:4px;">üëÅ <strong>1.2k</strong> vistas</span>
              </div>

              <div class="card" style="margin-top:8px;" data-concept="vigilancia" data-what="link-preview">
                <div style="display:flex; gap:8px; align-items:center;">
                  <div style="width:50px; height:40px; border-radius:6px; background:linear-gradient(135deg,#ec4899 0%,#a855f7 100%); display:flex; align-items:center; justify-content:center; color:white; font-weight:bold;">Ev</div>
                  <div>
                    <div style="font-weight:700; font-size:0.9rem;">Rese√±a: Mejores festivales 2025</div>
                    <div class="small">üìç enlace detectado y registrado en tu perfil</div>
                  </div>
                </div>
              </div>
            </div>

            <div class="post-actions">
              <button class="action-btn" data-concept="afectos" data-what="reaction-like">üëç <span class="count">12</span></button>
              <button class="action-btn" data-concept="afectos" data-what="reaction-comment">üí¨ Comentar</button>
              <button class="action-btn" data-concept="atencion" data-what="reaction-share">üîÅ Compartir</button>
              <button class="action-btn" data-concept="vigilancia" data-what="reaction-save">üîñ Guardar</button>
            </div>

            <div class="comment-box" data-concept="afectos" data-what="comment-box">
              <div class="avatar-sm" data-concept="afectos"></div>
              <input class="comment-input" placeholder="Escribe un comentario..." />
              <button class="action-btn comment-send" data-concept="afectos" data-what="comment-send">Enviar</button>
            </div>
          </article>

          <!-- POST 2 -->
          <article class="post" data-id="p2" role="article">
            <div class="post-header">
              <div class="avatar-sm"></div>
              <div style="flex:1;">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                  <strong>Noticias Hoy</strong>
                  <div class="small"><span data-concept="vigilancia" data-what="timestamp">Hace 1h</span></div>
                </div>
              </div>
            </div>

            <div class="post-body">
              <div>Video: Tendencias que est√°n cambiando nuestras ciudades</div>

              <div class="post-video" data-concept="atencion" data-what="video-autoplay" style="background:linear-gradient(180deg,#eef6ff,#f7fdff);">
                <div style="text-align:center;">
                  <div style="font-size:3rem; margin-bottom:10px;">üìπ</div>
                  <div class="small">Video en autoplay</div>
                </div>
              </div>

              <div class="counts" style="display:flex; gap:12px; padding:8px 12px; border-top:1px solid rgba(2,6,23,0.03); border-bottom:1px solid rgba(2,6,23,0.03); margin:8px 0;">
                <span class="reaction-count" data-concept="afectos" data-what="reaction-counter" style="flex:1; cursor:help; padding:4px; border-radius:4px;">‚ù§ <strong>62</strong> reacciones</span>
                <span class="small" data-concept="atencion" data-what="comment-counter" style="flex:1; cursor:help; padding:4px; border-radius:4px;">üí¨ <strong>40</strong> comentarios</span>
              </div>
            </div>

            <div class="post-actions">
              <button class="action-btn" data-concept="afectos" data-what="reaction-like">üëç <span class="count">40</span></button>
              <button class="action-btn" data-concept="afectos" data-what="reaction-heart">‚ù§Ô∏è <span class="count">22</span></button>
              <button class="action-btn" data-concept="atencion" data-what="reaction-share">üîÅ Compartir</button>
              <button class="action-btn" data-concept="vigilancia" data-what="reaction-save">üîñ Guardar</button>
            </div>

            <div class="comment-box" data-concept="afectos" data-what="comment-box">
              <div class="avatar-sm"></div>
              <input class="comment-input" placeholder="Escribe un comentario..." />
              <button class="action-btn comment-send" data-concept="afectos" data-what="comment-send">Enviar</button>
            </div>
          </article>

          <!-- POST 3 -->
          <article class="post" data-id="p3" role="article">
            <div class="post-header">
              <div class="avatar-sm"></div>
              <div style="flex:1;">
                <div>
                  <strong>Camilo L√≥pez</strong>
                  <div class="small" style="display:inline-block; margin-left:8px;">
                    <span data-concept="vigilancia" data-what="timestamp">Hace 3h</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="post-body">
              <div>Recomiendo este libro sobre cuidado emocional. Muy inspirador. üìö</div>
              <div class="counts" style="display:flex; gap:12px; padding:8px 12px; border-top:1px solid rgba(2,6,23,0.03); border-bottom:1px solid rgba(2,6,23,0.03); margin:8px 0;">
                <span class="reaction-count" data-concept="afectos" data-what="reaction-counter" style="flex:1; cursor:help; padding:4px; border-radius:4px;">‚ù§ <strong>26</strong> reacciones</span>
              </div>
            </div>

            <div class="post-actions">
              <button class="action-btn" data-concept="afectos" data-what="reaction-like"><span class="count">5</span> üëç</button>
              <button class="action-btn" data-concept="afectos" data-what="reaction-heart"><span class="count">20</span> ‚ù§Ô∏è</button>
              <button class="action-btn" data-concept="afectos" data-what="reaction-surprised"><span class="count">1</span> üòÆ</button>
              <button class="action-btn" data-concept="atencion" data-what="reaction-share">üîÅ Compartir</button>
            </div>

            <div class="comment-box" data-concept="afectos" data-what="comment-box">
              <div class="avatar-sm"></div>
              <input class="comment-input" placeholder="Escribe un comentario..." />
              <button class="action-btn comment-send" data-concept="afectos" data-what="comment-send">Enviar</button>
            </div>
          </article>

          <div class="small" style="text-align:center; margin-top:24px; padding:16px; color:#9ca3af;">Fin del feed simulado. Cada elemento est√° clasificado en uno de los 3 conceptos te√≥ricos.</div>
        </div>

        <!-- RIGHT SIDEBAR -->
        <div class="sidebar-right">
          <div class="card map-panel" aria-label="Clasificaci√≥n de elementos seg√∫n concepto te√≥rico">
            <strong>üìä Clasificaci√≥n</strong>
            <p class="small" style="margin-top:6px;">Cada elemento clasificado en 3 conceptos te√≥ricos</p>
            <div id="micro-map" style="margin-top:12px;"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="tooltip" class="tooltip" role="tooltip" aria-hidden="true"></div>

  <script>
    const MICRO_MAP = [
      {key: 'top-search', label: 'Barra de b√∫squeda', concept: 'Capitalismo de la Vigilancia', why: 'Cada consulta se registra como dato de inter√©s y alimenta el modelo de predicci√≥n comportamental.'},
      {key: 'timestamp', label: 'Metadata temporal (hora)', concept: 'Capitalismo de la Vigilancia', why: 'Permite modelar ritmos de actividad y patrones temporales del usuario.'},
      {key: 'story-suggested', label: 'Historia sugerida', concept: 'Capitalismo de la Vigilancia', why: 'Aparece porque t√∫ fuiste perfilado como usuario interesado en este tipo de contenido.'},
      {key: 'promo-badge', label: 'Anuncio promocionado', concept: 'Capitalismo de la Vigilancia', why: 'Resultado de subastas algor√≠tmicas basadas en tu perfil de comportamiento.'},
      {key: 'reaction-save', label: 'Bot√≥n guardar', concept: 'Capitalismo de la Vigilancia', why: 'Se√±al de inter√©s persistente; insumo para retargeting y perfiles de largo plazo.'},
      {key: 'link-preview', label: 'Vista previa de enlace', concept: 'Capitalismo de la Vigilancia', why: 'Registra qu√© enlaces despiertan tu inter√©s; datos de navegaci√≥n externa.'},
      {key: 'guardados', label: 'Guardados / Bookmarks', concept: 'Capitalismo de la Vigilancia', why: 'Historial de lo que guardaste; perfil de preferencias a largo plazo.'},
      {key: 'configuracion', label: 'Configuraci√≥n / Settings', concept: 'Capitalismo de la Vigilancia', why: 'Aunque aparenta control, cada opci√≥n genera m√°s datos sobre preferencias.'},
      {key: 'amigos', label: 'Lista de amigos / conexiones', concept: 'Capitalismo de la Vigilancia', why: 'Construye el grafo social; insumo para modelado relacional y recomendaciones.'},
      {key: 'story-autoplay', label: 'Historia con autoplay', concept: 'Econom√≠a de la Atenci√≥n', why: 'Reproducci√≥n autom√°tica sin acci√≥n del usuario; dise√±o para retenci√≥n.'},
      {key: 'video-autoplay', label: 'Video con autoplay', concept: 'Econom√≠a de la Atenci√≥n', why: 'Reduce fricci√≥n; el contenido inicia sin clic, atrapando atenci√≥n visual.'},
      {key: 'notif-badge', label: 'Badge de notificaci√≥n', concept: 'Econom√≠a de la Atenci√≥n', why: 'Interruptor atencional: el n√∫mero rojo atrae la mirada y genera urgencia.'},
      {key: 'view-counter', label: 'Contador de vistas', concept: 'Econom√≠a de la Atenci√≥n', why: 'M√©trica de consumo; muestra que el contenido atrae; gamifica participaci√≥n.'},
      {key: 'comment-counter', label: 'Contador de comentarios', concept: 'Econom√≠a de la Atenci√≥n', why: 'Indicador de engagement; valida socialmente qu√© contenido atrae atenci√≥n.'},
      {key: 'reaction-share', label: 'Bot√≥n compartir', concept: 'Econom√≠a de la Atenci√≥n', why: 'Propaga contenido; multiplica cadenas de atenci√≥n entre usuarios.'},
      {key: 'trending', label: 'Tendencias / Trending Topics', concept: 'Econom√≠a de la Atenci√≥n', why: 'Valida socialmente; crea FOMO sobre qu√© "todos est√°n viendo".'},
      {key: 'composer', label: 'Caja de composici√≥n', concept: 'Econom√≠as de los Afectos', why: 'Publicar es acto afectivo; genera m√©tricas sociales y visibilidad.'},
      {key: 'composer-post', label: 'Bot√≥n publicar', concept: 'Econom√≠as de los Afectos', why: 'Convierte expresi√≥n en contenido susceptible de reacciones y validaci√≥n.'},
      {key: 'reaction-counter', label: 'Conteo de reacciones', concept: 'Econom√≠as de los Afectos', why: 'Cuantifica afectos p√∫blicamente; traduce emociones en n√∫meros visibles.'},
      {key: 'reaction-like', label: 'Reacci√≥n "Me gusta"', concept: 'Econom√≠as de los Afectos', why: 'Expresi√≥n emocional cuantificada; trabajo afectivo no remunerado.'},
      {key: 'reaction-heart', label: 'Reacci√≥n coraz√≥n', concept: 'Econom√≠as de los Afectos', why: 'Matiz emocional (amor/aprecio); produce datos sobre valencia afectiva.'},
      {key: 'reaction-surprised', label: 'Reacci√≥n sorpresa', concept: 'Econom√≠as de los Afectos', why: 'Expresi√≥n de emoci√≥n (sorpresa); cuantifica estado afectivo del usuario.'},
      {key: 'reaction-comment', label: 'Bot√≥n comentar', concept: 'Econom√≠as de los Afectos', why: 'Genera reciprocidad social; el engagement es trabajo emocional no remunerado.'},
      {key: 'comment-send', label: 'Enviar comentario', concept: 'Econom√≠as de los Afectos', why: 'Acci√≥n que produce interacciones registradas; amplifica visibilidad emocional.'},
      {key: 'visto-por', label: 'Avatares "visto por"', concept: 'Econom√≠as de los Afectos', why: 'Expone quien te vio; genera reconocimiento social, pero produce datos relacionales.'},
      {key: 'comment-box', label: 'Caja de comentario', concept: 'Econom√≠as de los Afectos', why: 'Espacio donde expresas opiniones/emociones; genera engagement y trabajo afectivo.'}
    ];

    const landingPage = document.getElementById('landing-page');
    const socialInterface = document.getElementById('social-interface');
    const startBtn = document.getElementById('start-simulation');
    const backBtn = document.getElementById('back-to-landing');
    const toggleDocBtn = document.getElementById('toggle-doc');
    const tooltip = document.getElementById('tooltip');

    startBtn.addEventListener('click', () => {
      landingPage.classList.remove('active');
      socialInterface.classList.add('active');
    });

    backBtn.addEventListener('click', () => {
      socialInterface.classList.remove('active');
      landingPage.classList.add('active');
    });

    document.getElementById('go-landing').addEventListener('click', () => {
      socialInterface.classList.remove('active');
      landingPage.classList.add('active');
    });

    let tooltipTimer = null;
    function showTooltip(target, title, text, concept, ms = 5000) {
      clearTimeout(tooltipTimer);
      let conceptTag = '';
      if (concept === 'Capitalismo de la Vigilancia') conceptTag = '<span class="tooltip-concept-tag" style="background: var(--vigilancia);">üëÅ VIGILANCIA</span>';
      else if (concept === 'Econom√≠a de la Atenci√≥n') conceptTag = '<span class="tooltip-concept-tag" style="background: var(--atencion);">‚ö° ATENCI√ìN</span>';
      else if (concept === 'Econom√≠as de los Afectos') conceptTag = '<span class="tooltip-concept-tag" style="background: var(--afectos);">üíó AFECTOS</span>';
      tooltip.innerHTML = `<strong>${title}</strong><div style="margin-top:8px; font-size:0.85rem;">${text}</div>${conceptTag}`;
      tooltip.style.display = 'block';
      tooltip.classList.add('show');
      tooltip.setAttribute('aria-hidden','false');
      const rect = target.getBoundingClientRect();
      const maxLeft = window.innerWidth - 440;
      const left = Math.max(12, Math.min(maxLeft, rect.left + window.scrollX));
      let top = rect.top + window.scrollY - tooltip.offsetHeight - 12;
      if (top < 12) top = rect.bottom + window.scrollY + 12;
      tooltip.style.left = left + 'px';
      tooltip.style.top = top + 'px';
      tooltipTimer = setTimeout(() => {
        tooltip.classList.remove('show');
        tooltip.style.display = 'none';
        tooltip.setAttribute('aria-hidden','true');
      }, ms);
    }
    function hideTooltip() {
      tooltip.classList.remove('show');
      tooltip.style.display = 'none';
      tooltip.setAttribute('aria-hidden','true');
      clearTimeout(tooltipTimer);
    }

    const mapContainer = document.getElementById('micro-map');
    if (mapContainer) {
      MICRO_MAP.forEach(item => {
        const div = document.createElement('div');
        div.className = 'map-item';
        let colorClass = '';
        if (item.concept.includes('Vigilancia')) colorClass = 'map-vigilancia';
        else if (item.concept.includes('Atenci√≥n')) colorClass = 'map-atencion';
        else colorClass = 'map-afectos';
        div.innerHTML = `
          <div class="map-bullet ${colorClass}"></div>
          <div class="map-item-text">
            <strong>${item.label}</strong>
            <div class="why">${item.concept}</div>
            <div class="why" style="margin-top:4px; color:#9ca3af;">${item.why}</div>
          </div>
        `;
        div.addEventListener('click', () => showTooltip(div, item.label, item.why, item.concept, 7000));
        div.addEventListener('mouseenter', () => showTooltip(div, item.label, item.why, item.concept, 2500));
        div.addEventListener('mouseleave', () => hideTooltip());
        mapContainer.appendChild(div);
      });
    }

    toggleDocBtn.addEventListener('click', () => {
      const isActive = document.body.classList.toggle('docente-mode');
      if (isActive) {
        document.querySelectorAll('[data-concept]').forEach(el => {
          const existing = el.querySelector('.doc-badge');
          if (existing) existing.remove();
          const concept = el.getAttribute('data-concept');
          const badge = document.createElement('span');
          badge.className = 'doc-badge ' + (concept === 'vigilancia' ? 'doc-vigilancia' : (concept === 'atencion' ? 'doc-atencion' : 'doc-afectos'));
          badge.textContent = concept === 'vigilancia' ? 'VIG' : (concept === 'atencion' ? 'ATE' : 'AFE');
          el.style.position = 'relative';
          el.appendChild(badge);
        });
        toggleDocBtn.textContent = '‚úì Modo Docente Activo';
      } else {
        document.querySelectorAll('.doc-badge').forEach(b => b.remove());
        toggleDocBtn.textContent = 'Modo Docente';
      }
    });

    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('[data-what]').forEach(el => {
        const key = el.getAttribute('data-what');
        const mapItem = MICRO_MAP.find(x => x.key === key);
        if (!mapItem) return;
        const conceptAttr = mapItem.concept === 'Capitalismo de la Vigilancia' ? 'vigilancia' : (mapItem.concept === 'Econom√≠a de la Atenci√≥n' ? 'atencion' : 'afectos');
        el.setAttribute('data-concept', conceptAttr);
        el.style.cursor = 'help';
        el.addEventListener('click', (e) => { e.stopPropagation(); showTooltip(el, mapItem.label, mapItem.why, mapItem.concept, 6000); });
        el.addEventListener('mouseenter', () => showTooltip(el, mapItem.label, mapItem.why, mapItem.concept, 2500));
        el.addEventListener('mouseleave', hideTooltip);
      });

      document.querySelectorAll('.post-actions .action-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const count = btn.querySelector('.count');
          if (count) count.textContent = Number(count.textContent) + 1;
        });
      });

      document.querySelectorAll('.comment-send').forEach(btn => {
        btn.addEventListener('click', () => {
          const input = btn.parentElement.querySelector('.comment-input');
          if (input) input.value = '';
        });
      });
    });
  </script>
</body>
</html>
